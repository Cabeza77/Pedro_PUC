#
#--Makefile to remake the executable and copy to this directory
#  Generated by /Users/cuello/phantom/scripts/writemake.sh: Mon Dec 19 11:27:49 CLST 2016
#
PHANTOMDIR=/Users/cuello/phantom/
SPLASHDIR=/Users/cuello/splash
EDITOR=nedit
ifndef SETUP
SETUP=binarydisc
endif

again:
	cd ${PHANTOMDIR}; make SETUP=${SETUP} RUNDIR=${PWD}; cd -; cp ${PHANTOMDIR}/bin/phantom .

all: again setup infile

.PHONY: phantom phantomsetup phantom2power phantom2grid phantomanalysis phantomevcompare libphantom mflow ev2mdot ev2mdotsink ev2mdotbinary
phantom         : again
phantomsetup    : setup
phantom2power   : power
phantom2grid    : grid
phantomanalysis : analysis
phantomevcompare: evcompare
libphantom      : phantomlib
mflow           : mflow
ev2mdot         : ev2mdot
ev2mdotsink     : ev2mdotsink
ev2mdotbinary   : ev2mdotbinary

clean:
	cd ${PHANTOMDIR}; make clean
setup:
	cd ${PHANTOMDIR}; make SETUP=${SETUP} RUNDIR=${PWD} setup; cd -; cp ${PHANTOMDIR}/bin/phantomsetup .
moddump:
	cd ${PHANTOMDIR}; make SETUP=${SETUP} RUNDIR=${PWD} moddump; cd -; cp ${PHANTOMDIR}/bin/phantommoddump .
analysis:
	cd ${PHANTOMDIR}; make SETUP=${SETUP} RUNDIR=${PWD} phantomanalysis; cd -; cp ${PHANTOMDIR}/bin/phantomanalysis .
phantomlib:
	cd ${PHANTOMDIR}; make SETUP=${SETUP} RUNDIR=${PWD} libphantom; cd -; cp ${PHANTOMDIR}/bin/libphantom.so .
power:
	cd ${PHANTOMDIR}; make SETUP=${SETUP} RUNDIR=${PWD} phantom2power; cd -; cp ${PHANTOMDIR}/bin/phantom2power .
grid:
	cd ${PHANTOMDIR}; make SETUP=${SETUP} RUNDIR=${PWD} phantom2grid; cd -; cp ${PHANTOMDIR}/bin/phantom2grid .
evcompare:
	cd ${PHANTOMDIR}; make SETUP=${SETUP} RUNDIR=${PWD} phantomevcompare; cd -; cp ${PHANTOMDIR}/bin/phantomevcompare .
mflow:
	cd ${PHANTOMDIR}; make SETUP=${SETUP} RUNDIR=${PWD} mflow; cd -; cp ${PHANTOMDIR}/bin/mflow .; cp ${PHANTOMDIR}/bin/ev2mdotbinary .; cp ${PHANTOMDIR}/bin/lombperiod .
ev2mdot:
	cd ${PHANTOMDIR}; make SETUP=${SETUP} RUNDIR=${PWD} ev2mdot; cd -; cp ${PHANTOMDIR}/bin/ev2mdot .
ev2mdotsink:
	cd ${PHANTOMDIR}; make SETUP=${SETUP} RUNDIR=${PWD} ev2mdotsink; cd -; cp ${PHANTOMDIR}/bin/ev2mdotsink .
ev2mdotbinary:
	cd ${PHANTOMDIR}; make SETUP=${SETUP} RUNDIR=${PWD} ev2mdotbinary; cd -; cp ${PHANTOMDIR}/bin/ev2mdotbinary .
make:
	cd ${PHANTOMDIR}; ${EDITOR} build/Makefile &
infile:
	cp ${PHANTOMDIR}/run_in .
qscript:
	@cd ${PHANTOMDIR}; make --quiet SETUP=${SETUP} RUNDIR=${PWD} qscript
%::
	cd ${PHANTOMDIR}; make SETUP=${SETUP} RUNDIR=${PWD} ${MAKECMDGOALS}
#
# the following are for rebuilding splash
#
plot:
	cd ${SPLASHDIR}; make sphNG
plotc:
	cd ${SPLASHDIR}; make clean
